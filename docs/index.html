<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå­¦æœ¯æ¶¦è‰²ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <h1 class="text-3xl font-bold text-center mb-8 text-blue-600">AIå­¦æœ¯æ¶¦è‰²ç³»ç»Ÿ</h1>
        
        <div class="bg-white rounded-lg shadow-lg p-6">
            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">è¾“å…¥æ–‡æœ¬</label>
                <textarea id="inputText" 
                    class="w-full h-32 p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                    placeholder="è¯·è¾“å…¥éœ€è¦æ¶¦è‰²çš„æ–‡æœ¬..."></textarea>
            </div>

            <!-- é£æ ¼é€‰æ‹© -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">æ¶¦è‰²é£æ ¼</label>
                <select id="styleSelect" class="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                    <option value="academic">å­¦æœ¯è®ºæ–‡</option>
                    <option value="formal">æ­£å¼æ–‡ä½“</option>
                    <option value="casual">é€šä¿—æ˜“æ‡‚</option>
                    <option value="creative">åˆ›æ„è¡¨è¾¾</option>
                </select>
            </div>

            <!-- æŒ‰é’®åŒºåŸŸ -->
            <div class="flex gap-4 mb-6">
                <button id="processBtn" class="flex-1 bg-blue-600 text-white py-3 px-6 rounded-md hover:bg-blue-700 disabled:opacity-50">
                    å¼€å§‹æ¶¦è‰²
                </button>
                <button id="detectBtn" class="flex-1 bg-green-600 text-white py-3 px-6 rounded-md hover:bg-green-700">
                    AIæ£€æµ‹
                </button>
            </div>

            <!-- è¿›åº¦æç¤º -->
            <div id="progress" class="hidden mb-6">
                <div class="flex items-center justify-center">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"></div>
                    <span id="progressText" class="text-blue-600">ğŸ¤” AIæ­£åœ¨æ·±åº¦æ€è€ƒä¸­...</span>
                </div>
            </div>

            <!-- ç»“æœåŒºåŸŸ -->
            <div id="result" class="hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-semibold text-gray-700 mb-2">åŸæ–‡</h3>
                        <div id="originalText" class="p-3 bg-gray-100 rounded-md min-h-32"></div>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-700 mb-2">æ¶¦è‰²å</h3>
                        <div id="processedText" class="p-3 bg-blue-50 rounded-md min-h-32"></div>
                    </div>
                </div>
                <div class="mt-4 text-sm text-gray-600">
                    <span id="aiProbability"></span> | 
                    <span id="processingTime"></span> | 
                    <span id="apiUsed"></span>
                </div>
                <button id="copyBtn" class="mt-4 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700">
                    å¤åˆ¶ç»“æœ
                </button>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000/api/v1';
        
        document.getElementById('processBtn').addEventListener('click', async () => {
            const inputText = document.getElementById('inputText').value.trim();
            const style = document.getElementById('styleSelect').value;
            
            if (!inputText) {
                alert('è¯·è¾“å…¥æ–‡æœ¬');
                return;
            }

            showProgress('ğŸ¤” AIæ­£åœ¨æ·±åº¦æ€è€ƒä¸­...');
            
            try {
                const response = await fetch(`${API_BASE}/process`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        content: inputText,
                        style: style
                    })
                });

                const result = await response.json();
                showResult(result);
            } catch (error) {
                hideProgress();
                alert('å¤„ç†å¤±è´¥ï¼š' + error.message);
            }
        });

        document.getElementById('detectBtn').addEventListener('click', async () => {
            const inputText = document.getElementById('inputText').value.trim();
            
            if (!inputText) {
                alert('è¯·è¾“å…¥æ–‡æœ¬');
                return;
            }

            showProgress('ğŸ” æ­£åœ¨æ£€æµ‹AIæ¦‚ç‡...');
            
            try {
                const response = await fetch(`${API_BASE}/detect`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        content: inputText
                    })
                });

                const result = await response.json();
                alert(`AIç”Ÿæˆæ¦‚ç‡: ${(result.ai_probability * 100).toFixed(1)}%`);
                hideProgress();
            } catch (error) {
                hideProgress();
                alert('æ£€æµ‹å¤±è´¥ï¼š' + error.message);
            }
        });

        document.getElementById('copyBtn').addEventListener('click', () => {
            const text = document.getElementById('processedText').textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            });
        });

        function showProgress(text) {
            document.getElementById('progressText').textContent = text;
            document.getElementById('progress').classList.remove('hidden');
            document.getElementById('processBtn').disabled = true;
            document.getElementById('result').classList.add('hidden');
        }

        function hideProgress() {
            document.getElementById('progress').classList.add('hidden');
            document.getElementById('processBtn').disabled = false;
        }

        function showResult(data) {
            hideProgress();
            
            document.getElementById('originalText').textContent = data.original_text;
            document.getElementById('processedText').textContent = data.processed_text;
            document.getElementById('aiProbability').textContent = `AIæ¦‚ç‡: ${(data.ai_probability * 100).toFixed(1)}%`;
            document.getElementById('processingTime').textContent = `å¤„ç†æ—¶é—´: ${data.processing_time.toFixed(1)}ç§’`;
            document.getElementById('apiUsed').textContent = `æœåŠ¡: ${data.api_used}`;
            
            document.getElementById('result').classList.remove('hidden');
        }
    </script>
</body>
</html>
